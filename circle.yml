machine:
  timezone:
    Europe/Berlin
  node:
    version: 4.2.2
  services:
    - docker

general:
  artifacts:
    - "coverage"

test:
  override:
    - MOCHA_FILE=$CIRCLE_TEST_REPORTS/test-results.xml npm run test:cover
  post:
    - cp -R coverage $CIRCLE_ARTIFACTS/coverage/

deployment:
  hub-master:
    branch: master
    commands:
      - eval "$DEPLOY_MASTER"
  hub-develop:
    branch: develop
    commands:
      - eval "$DEPLOY_DEVELOP"
